# Backup files

OmegaT creates several backup files when saving a project.
Here is an explanation of under the hood.

## Behavior when save translation saved

Actual work is done in `ProjectTMX#save`

1. check save action is necessary
2. OmegaT creates a new file, "project_save.tmx.new"
3. write data into "project_save.tmx.new"
4. check the existence of backup file "project_save.tmx.bak"
5. if existed, remove old backup file.
6. rename "project_save.tmx" to "project_save.tmx.bak"
7. rename "project_save.tmx.new" to "project_save.tmx" (*1)


This is a sequence when a project is no-team one.


## Team project backup

A backup file with a name that have timestamp is created by team sync feature.

After saving "project_save.tmx" in previous steps,  as same as no-team project, OmegaT try to sync with remote team repository. It is happened after showing status message "TEAM_SYNCHRONIZE".

When remote file has been modified BY OTHER TRANSLATORS, OmegaT find a difference from a last status, OmegaT decided to make backup, then
OmegaT move local file (*1) to "project_save.tmx.YYYYMMDDhhmmss.bak" and store merged tmx to "project_save.tmx".

Now you will find three files.

1.  "project_save.tmx.bak" --  "project_save.tmx" file  just before save.
2.  "project_save.tmx.YYYYMMDDhhmmss.bak" -- "project_save.tmx" file just after save translator worked.
3.  "project_save.tmx" -- which has both translations by the translator and other translators.

If another translator does not work on the project during the translator working, there is NOT a "project_save.tmx.YYYYMMDDhhmmss.bak" is not made
because there is no difference between (*1) and the last project file.

